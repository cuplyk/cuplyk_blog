{% load static %}
<header class="header-nav">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navbar-expand-lg navbar-light p-0">
                    <!-- Logo -->
                    <a class="navbar-brand font-weight-bold mb-0" href="{% url 'post_list' %}" title="Cuplyk">
                        <img class="img-fluid" width="110" height="35" src="{% static 'images/logo.png' %}" alt="Cuplyk">
                    </a>

                    <!-- Search toggle for mobile -->
                    <button 
                        class="search-toggle d-inline-block d-lg-none ms-auto me-1 me-sm-3" 
                        id="mobile-search-toggle" 
                        aria-label="Toggle search">
                        <span>Search</span>
                        <svg width="22" height="22" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15.5 15.5L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M5 11C5 14.3137 7.68629 17 11 17C12.6597 17 14.1621 16.3261 15.2483 15.237C16.3308 14.1517 17 12.654 17 11C17 7.68629 14.3137 5 11 5C7.68629 5 5 7.68629 5 11Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>

                    <!-- Navbar toggler -->
                    <button 
                        class="navbar-toggler" 
                        type="button" 
                        data-bs-toggle="collapse" 
                        data-bs-target="#navHeader" 
                        aria-controls="navHeader" 
                        aria-expanded="false" 
                        aria-label="Toggle navigation">
                        <i class="ti ti-menu-2 menu-open"></i>
                        <i class="ti ti-x menu-close"></i>
                    </button>

                    <!-- Navbar links -->
                    <div class="collapse navbar-collapse" id="navHeader">
                        <ul class="navbar-nav mx-auto">
                            <li class="nav-item active">
                                <a class="nav-link" href="{% url 'post_list' %}">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'about' %}">About</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="elements.html">Elements</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'archive' %}">Archive</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'contact' %}">Contact</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a 
                                    class="nav-link dropdown-toggle" 
                                    href="#" 
                                    id="navbarDropdown" 
                                    role="button" 
                                    data-bs-toggle="dropdown" 
                                    aria-expanded="false">
                                    Pages
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item" href="author.html">Author</a></li>
                                    <li><a class="dropdown-item" href="author-single.html">Author Single</a></li>
                                    <li><a class="dropdown-item" href="tags.html">Tags</a></li>
                                    <li><a class="dropdown-item" href="tag-single.html">Tag Single</a></li>
                                    <li><a class="dropdown-item" href="categories.html">Categories</a></li>
                                    <li><a class="dropdown-item" href="categories-single.html">Category Single</a></li>
                                    <li><a class="dropdown-item" href="404-page.html">404 Page</a></li>
                                    <li><a class="dropdown-item" href="privacy.html">Privacy</a></li>
                                </ul>
                            </li>
                        </ul>

                        <!-- Desktop search toggle -->
                        <div class="navbar-right d-none d-lg-inline-block">
                            <button 
                                class="search-toggle" 
                                id="desktop-search-toggle" 
                                aria-label="Toggle search">
                                <span>Search</span>
                                <svg width="22" height="22" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.5 15.5L19 19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M5 11C5 14.3137 7.68629 17 11 17C12.6597 17 14.1621 16.3261 15.2483 15.237C16.3308 14.1517 17 12.654 17 11C17 7.68629 14.3137 5 11 5C7.68629 5 5 7.68629 5 11Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>

                        <!-- Hidden search form -->
                        <form 
                            action="{% url 'search_posts' %}" 
                            method="get" 
                            id="search-form" 
                            class="d-none">
                            <div class="input-group">
                                <input 
                                    type="text" 
                                    name="q" 
                                    class="form-control" 
                                    placeholder="Search..." 
                                    aria-label="Search query" 
                                    required>
                                <button type="submit" class="btn btn-primary">Search</button>
                            </div>
                        </form>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchToggleButtons = document.querySelectorAll('.search-toggle');
        const searchForm = document.querySelector('#search-form');
        const mobileSearchToggle = document.querySelector('#mobile-search-toggle');
        const desktopSearchToggle = document.querySelector('#desktop-search-toggle');

        searchToggleButtons.forEach(button => {
            button.addEventListener('click', function () {
                searchForm.classList.toggle('d-none');
                if (!searchForm.classList.contains('d-none')) {
                    searchForm.querySelector('input[name="q"]').focus();
                }
            });
        });

        document.addEventListener('click', function (e) {
            if (!searchForm.contains(e.target) && !e.target.closest('.search-toggle')) {
                searchForm.classList.add('d-none');
            }
        });
    });
</script>
